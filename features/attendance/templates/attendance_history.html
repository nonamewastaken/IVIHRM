{% extends "base.html" %}

{% block title %}Attendance History - HRM System{% endblock %}

{% block page_title %}<i class="fas fa-history"></i> Attendance History{% endblock %}

{% block extra_css %}
<style>
    /* Attendance History specific styles */
    .history-container {
        max-width: 100%;
    }
    
    .history-card {
        background: white;
        border-radius: 8px;
        padding: 30px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .filter-section {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }
    
    .filter-row {
        display: flex;
        gap: 15px;
        align-items: center;
        flex-wrap: wrap;
    }
    
    .filter-group {
        display: flex;
        flex-direction: column;
        gap: 5px;
    }

    .filter-group label {
        font-weight: 600;
        color: #333;
        font-size: 0.9rem;
    }

    .filter-group input,
    .filter-group select {
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 0.9rem;
    }

    .btn {
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
    }

    .btn-primary {
        background: #007bff;
        color: white;
    }

    .btn-secondary {
        background: #6c757d;
        color: white;
    }

    .history-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    
    .history-table th,
    .history-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    
    .history-table th {
        background-color: #f8f9fa;
        font-weight: 600;
        color: #333;
    }

    .history-table tr:hover {
        background-color: #f5f5f5;
    }
    
    .status-present {
        color: #28a745;
        font-weight: 600;
    }
    
    .status-late {
        color: #ffc107;
        font-weight: 600;
    }

    .status-absent {
        color: #dc3545;
        font-weight: 600;
    }

    .pagination {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 20px;
    }

    .pagination button {
        padding: 8px 12px;
        border: 1px solid #ddd;
        background: white;
        cursor: pointer;
        border-radius: 4px;
    }

    .pagination button:hover {
        background: #f8f9fa;
    }

    .pagination button.active {
        background: #007bff;
        color: white;
        border-color: #007bff;
    }
</style>
{% endblock %}

{% block content %}
<div class="history-container">
    <div class="history-card">
        <h1 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">
                <i class="fas fa-history"></i> Attendance History
        </h1>
        
            <!-- Filter Section -->
        <div class="filter-section">
                <h3 style="margin-bottom: 15px; color: #333;">
                    <i class="fas fa-filter"></i> Filter Records
                </h3>
            <div class="filter-row">
                    <div class="filter-group">
                        <label for="employeeSelect">Employee</label>
                        <select id="employeeSelect">
                            <option value="">All Employees</option>
                            <option value="1">John Doe</option>
                            <option value="2">Jane Smith</option>
                            <option value="3">Mike Johnson</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="dateFrom">From Date</label>
                        <input type="date" id="dateFrom">
                    </div>
                    <div class="filter-group">
                        <label for="dateTo">To Date</label>
                        <input type="date" id="dateTo">
                    </div>
                    <div class="filter-group">
                        <label for="statusSelect">Status</label>
                        <select id="statusSelect">
                            <option value="">All Status</option>
                            <option value="present">Present</option>
                            <option value="late">Late</option>
                            <option value="absent">Absent</option>
                        </select>
                </div>
                    <div class="filter-group">
                        <button class="btn btn-primary" onclick="filterRecords()">
                            <i class="fas fa-search"></i> Filter
                        </button>
                </div>
                    <div class="filter-group">
                        <button class="btn btn-secondary" onclick="clearFilters()">
                            <i class="fas fa-times"></i> Clear
                </button>
            </div>
            </div>
        </div>
        
            <!-- History Table -->
            <div style="overflow-x: auto;">
                <table class="history-table">
                <thead>
                    <tr>
                            <th>Date</th>
                            <th>Employee</th>
                            <th>Check In</th>
                            <th>Check Out</th>
                            <th>Work Hours</th>
                            <th>Status</th>
                            <th>Notes</th>
                    </tr>
                </thead>
                    <tbody>
                        <tr>
                            <td>2024-01-15</td>
                            <td>John Doe</td>
                            <td>09:00</td>
                            <td>17:30</td>
                            <td>8.5</td>
                            <td><span class="status-present">Present</span></td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>2024-01-15</td>
                            <td>Jane Smith</td>
                            <td>08:45</td>
                            <td>18:00</td>
                            <td>9.25</td>
                            <td><span class="status-present">Present</span></td>
                            <td>Overtime</td>
                        </tr>
                        <tr>
                            <td>2024-01-15</td>
                            <td>Mike Johnson</td>
                            <td>09:15</td>
                            <td>17:45</td>
                            <td>8.5</td>
                            <td><span class="status-late">Late</span></td>
                            <td>Traffic delay</td>
                        </tr>
                        <tr>
                            <td>2024-01-14</td>
                            <td>Sarah Wilson</td>
                            <td>09:00</td>
                            <td>16:30</td>
                            <td>7.5</td>
                            <td><span class="status-present">Present</span></td>
                            <td>Early leave - appointment</td>
                        </tr>
                        <tr>
                            <td>2024-01-14</td>
                            <td>David Brown</td>
                            <td>-</td>
                            <td>-</td>
                            <td>0</td>
                            <td><span class="status-absent">Absent</span></td>
                            <td>Sick leave</td>
                        </tr>
                        <tr>
                            <td>2024-01-13</td>
                            <td>John Doe</td>
                            <td>08:30</td>
                            <td>17:00</td>
                            <td>8.5</td>
                            <td><span class="status-present">Present</span></td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>2024-01-13</td>
                            <td>Jane Smith</td>
                            <td>09:00</td>
                            <td>18:30</td>
                            <td>9.5</td>
                            <td><span class="status-present">Present</span></td>
                            <td>Overtime</td>
                        </tr>
                        <tr>
                            <td>2024-01-13</td>
                            <td>Mike Johnson</td>
                            <td>09:00</td>
                            <td>17:30</td>
                            <td>8.5</td>
                            <td><span class="status-present">Present</span></td>
                            <td>-</td>
                        </tr>
                </tbody>
            </table>
        </div>
        
            <!-- Pagination -->
            <div class="pagination">
                <button onclick="changePage(1)">«</button>
                <button onclick="changePage(1)" class="active">1</button>
                <button onclick="changePage(2)">2</button>
                <button onclick="changePage(3)">3</button>
                <button onclick="changePage(4)">4</button>
                <button onclick="changePage(5)">5</button>
                <button onclick="changePage(5)">»</button>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<script>
// Initialize sidebar for Attendance category
document.addEventListener('DOMContentLoaded', function() {
    // Set active sidebar item
    setActiveSidebarItem('/attendance/history');
    
    // Generate sidebar for Attendance category
    // Sidebar is handled by main sidebar component
});

// Filter functionality
function filterRecords() {
    const employee = document.getElementById('employeeSelect').value;
    const dateFrom = document.getElementById('dateFrom').value;
    const dateTo = document.getElementById('dateTo').value;
    const status = document.getElementById('statusSelect').value;
    
    console.log('Filtering records:', { employee, dateFrom, dateTo, status });
    // Implement actual filtering logic here
}

function clearFilters() {
    document.getElementById('employeeSelect').value = '';
    document.getElementById('dateFrom').value = '';
    document.getElementById('dateTo').value = '';
    document.getElementById('statusSelect').value = '';
    
    // Reload all records
    filterRecords();
}

function changePage(page) {
    console.log('Changing to page:', page);
    // Implement pagination logic here
}
</script>
{% endblock %}