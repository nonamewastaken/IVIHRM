{% extends "base.html" %}

{% block title %}Work Data - HRM System{% endblock %}

{% block page_title %}<i class="fas fa-database"></i> Work Data{% endblock %}

{% block extra_css %}
<style>
    /* Work Data specific styles */
    .work-data-container {
        max-width: 100%;
    }

    .work-data-card {
        background: white;
        border-radius: 8px;
        padding: 30px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .data-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .data-item {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #28a745;
    }

    .data-item h3 {
        color: #333;
        margin-bottom: 15px;
        font-size: 1.1rem;
    }

    .data-item .value {
        font-size: 1.5rem;
        font-weight: bold;
        color: #28a745;
        margin-bottom: 5px;
    }

    .data-item .label {
        color: #666;
        font-size: 0.9rem;
    }

    .table-container {
        background: white;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-top: 20px;
    }

    .data-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }

    .data-table th,
    .data-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    .data-table th {
        background-color: #f8f9fa;
        font-weight: 600;
        color: #333;
    }

    .data-table tr:hover {
        background-color: #f5f5f5;
    }
</style>
{% endblock %}

{% block content %}
    <div class="work-data-container">
        <div class="work-data-card">
            <h1 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">
                <i class="fas fa-database"></i> <span id="workDataTitle">Work Data</span>
            </h1>

            <!-- Data Overview Cards -->
            <div class="data-grid">
                <div class="data-item">
                    <h3 id="totalWorkHoursTitle">Total Work Hours</h3>
                    <div class="value">1,250</div>
                    <div class="label" id="hoursThisMonth">Hours this month</div>
                </div>
                <div class="data-item">
                    <h3 id="averageDailyHoursTitle">Average Daily Hours</h3>
                    <div class="value">8.2</div>
                    <div class="label" id="hoursPerDay">Hours per day</div>
                </div>
                <div class="data-item">
                    <h3 id="overtimeHoursTitle">Overtime Hours</h3>
                    <div class="value">45</div>
                    <div class="label" id="extraHoursWorked">Extra hours worked</div>
                </div>
                <div class="data-item">
                    <h3 id="efficiencyRateTitle">Efficiency Rate</h3>
                    <div class="value">94.5%</div>
                    <div class="label" id="productivityScore">Productivity score</div>
                </div>
            </div>

            <!-- Work Data Table -->
            <div class="table-container">
                <h3 style="margin-bottom: 20px; color: #333;">
                    <i class="fas fa-table"></i> <span id="recentWorkRecordsTitle">Recent Work Records</span>
                </h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th id="tableHeaderDate">Date</th>
                            <th id="tableHeaderEmployee">Employee</th>
                            <th id="tableHeaderCheckIn">Check In</th>
                            <th id="tableHeaderCheckOut">Check Out</th>
                            <th id="tableHeaderWorkHours">Work Hours</th>
                            <th id="tableHeaderStatus">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2024-01-15</td>
                            <td>John Doe</td>
                            <td>09:00</td>
                            <td>17:30</td>
                            <td>8.5</td>
                            <td><span style="color: #28a745;" id="status1" data-status="present">Present</span></td>
                        </tr>
                        <tr>
                            <td>2024-01-15</td>
                            <td>Jane Smith</td>
                            <td>08:45</td>
                            <td>18:00</td>
                            <td>9.25</td>
                            <td><span style="color: #28a745;" id="status2" data-status="present">Present</span></td>
                        </tr>
                        <tr>
                            <td>2024-01-15</td>
                            <td>Mike Johnson</td>
                            <td>09:15</td>
                            <td>17:45</td>
                            <td>8.5</td>
                            <td><span style="color: #ffc107;" id="status3" data-status="late">Late</span></td>
                        </tr>
                        <tr>
                            <td>2024-01-14</td>
                            <td>Sarah Wilson</td>
                            <td>09:00</td>
                            <td>16:30</td>
                            <td>7.5</td>
                            <td><span style="color: #28a745;" id="status4" data-status="present">Present</span></td>
                        </tr>
                        <tr>
                            <td>2024-01-14</td>
                            <td>David Brown</td>
                            <td>-</td>
                            <td>-</td>
                            <td>0</td>
                            <td><span style="color: #dc3545;" id="status5" data-status="absent">Absent</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Work Analytics -->
            <div class="table-container">
                <h3 style="margin-bottom: 20px; color: #333;">
                    <i class="fas fa-chart-pie"></i> <span id="workAnalyticsTitle">Work Analytics</span>
                </h3>
                <div style="height: 300px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #666;">
                    <div style="text-align: center;">
                        <i class="fas fa-chart-pie" style="font-size: 3rem; margin-bottom: 10px; opacity: 0.5;"></i>
                        <p id="analyticsPlaceholder">Work analytics charts will be displayed here</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<script>
// Function to update Work Data translations
function updateWorkDataTranslations() {
    if (!window.t) return;
    
    // Title
    const titleEl = document.getElementById('workDataTitle');
    if (titleEl) {
        titleEl.textContent = window.t('ui.sidebar.attendance.workDataTitle', 'Work Data');
    }
    
    // Key metrics
    const totalWorkHoursEl = document.getElementById('totalWorkHoursTitle');
    if (totalWorkHoursEl) {
        totalWorkHoursEl.textContent = window.t('ui.sidebar.attendance.totalWorkHours', 'Total Work Hours');
    }
    
    const hoursThisMonthEl = document.getElementById('hoursThisMonth');
    if (hoursThisMonthEl) {
        hoursThisMonthEl.textContent = window.t('ui.sidebar.attendance.hoursThisMonth', 'Hours this month');
    }
    
    const averageDailyHoursEl = document.getElementById('averageDailyHoursTitle');
    if (averageDailyHoursEl) {
        averageDailyHoursEl.textContent = window.t('ui.sidebar.attendance.averageDailyHours', 'Average Daily Hours');
    }
    
    const hoursPerDayEl = document.getElementById('hoursPerDay');
    if (hoursPerDayEl) {
        hoursPerDayEl.textContent = window.t('ui.sidebar.attendance.hoursPerDay', 'Hours per day');
    }
    
    const overtimeHoursEl = document.getElementById('overtimeHoursTitle');
    if (overtimeHoursEl) {
        overtimeHoursEl.textContent = window.t('ui.sidebar.attendance.overtimeHours', 'Overtime Hours');
    }
    
    const extraHoursWorkedEl = document.getElementById('extraHoursWorked');
    if (extraHoursWorkedEl) {
        extraHoursWorkedEl.textContent = window.t('ui.sidebar.attendance.extraHoursWorked', 'Extra hours worked');
    }
    
    const efficiencyRateEl = document.getElementById('efficiencyRateTitle');
    if (efficiencyRateEl) {
        efficiencyRateEl.textContent = window.t('ui.sidebar.attendance.efficiencyRate', 'Efficiency Rate');
    }
    
    const productivityScoreEl = document.getElementById('productivityScore');
    if (productivityScoreEl) {
        productivityScoreEl.textContent = window.t('ui.sidebar.attendance.productivityScore', 'Productivity score');
    }
    
    // Table section
    const recentWorkRecordsEl = document.getElementById('recentWorkRecordsTitle');
    if (recentWorkRecordsEl) {
        recentWorkRecordsEl.textContent = window.t('ui.sidebar.attendance.recentWorkRecords', 'Recent Work Records');
    }
    
    // Table headers
    const dateHeaderEl = document.getElementById('tableHeaderDate');
    if (dateHeaderEl) {
        dateHeaderEl.textContent = window.t('ui.sidebar.attendance.date', 'Date');
    }
    
    const employeeHeaderEl = document.getElementById('tableHeaderEmployee');
    if (employeeHeaderEl) {
        employeeHeaderEl.textContent = window.t('ui.sidebar.attendance.employee', 'Employee');
    }
    
    const checkInHeaderEl = document.getElementById('tableHeaderCheckIn');
    if (checkInHeaderEl) {
        checkInHeaderEl.textContent = window.t('ui.sidebar.attendance.checkIn', 'Check In');
    }
    
    const checkOutHeaderEl = document.getElementById('tableHeaderCheckOut');
    if (checkOutHeaderEl) {
        checkOutHeaderEl.textContent = window.t('ui.sidebar.attendance.checkOut', 'Check Out');
    }
    
    const workHoursHeaderEl = document.getElementById('tableHeaderWorkHours');
    if (workHoursHeaderEl) {
        workHoursHeaderEl.textContent = window.t('ui.sidebar.attendance.workHours', 'Work Hours');
    }
    
    const statusHeaderEl = document.getElementById('tableHeaderStatus');
    if (statusHeaderEl) {
        statusHeaderEl.textContent = window.t('ui.sidebar.attendance.status', 'Status');
    }
    
    // Status values
    const statusElements = ['status1', 'status2', 'status3', 'status4', 'status5'];
    statusElements.forEach(statusId => {
        const statusEl = document.getElementById(statusId);
        if (statusEl) {
            const statusType = statusEl.getAttribute('data-status');
            if (statusType === 'present') {
                statusEl.textContent = window.t('ui.sidebar.attendance.present', 'Present');
            } else if (statusType === 'late') {
                statusEl.textContent = window.t('ui.sidebar.attendance.late', 'Late');
            } else if (statusType === 'absent') {
                statusEl.textContent = window.t('ui.sidebar.attendance.absent', 'Absent');
            }
        }
    });
    
    // Work Analytics
    const workAnalyticsEl = document.getElementById('workAnalyticsTitle');
    if (workAnalyticsEl) {
        workAnalyticsEl.textContent = window.t('ui.sidebar.attendance.workAnalytics', 'Work Analytics');
    }
    
    const analyticsPlaceholderEl = document.getElementById('analyticsPlaceholder');
    if (analyticsPlaceholderEl) {
        analyticsPlaceholderEl.textContent = window.t('ui.sidebar.attendance.analyticsPlaceholder', 'Work analytics charts will be displayed here');
    }
}

// Initialize sidebar for Attendance category
document.addEventListener('DOMContentLoaded', function() {
    // Set active sidebar item
    setActiveSidebarItem('/attendance/work_data');
    
    // Generate sidebar for Attendance category
    // Sidebar is handled by main sidebar component
    
    // Wait for translations to be loaded, then update
    function initTranslations() {
        if (window.t && window.getCurrentLanguage) {
            updateWorkDataTranslations();
        } else {
            setTimeout(initTranslations, 100);
        }
    }
    
    initTranslations();
    
    // Listen for language changes
    window.addEventListener('languagechange', function() {
        updateWorkDataTranslations();
    });
});
</script>
{% endblock %}